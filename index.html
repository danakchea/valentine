<!DOCTYPE html>
<html>
<head>
<title>Valentine Heart Fireworks ðŸ’–</title>
<style>
body {
    margin: 0;
    height: 100vh;
    overflow: hidden;
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    background: linear-gradient(to right, #ff9a9e, #fad0c4);
}

canvas {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 9999;
    pointer-events: none;
}

.container {
    text-align: center;
    background-color: white;
    padding: 40px 60px;
    border-radius: 12px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    z-index: 10;
    position: relative;
}

.buttons {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 20px;
}

button {
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    position: relative;
}

.yes { background-color: #ff4b5c; color: white; }
.no { background-color: #ff6f61; color: white; }

#message {
    margin-top: 20px;
    font-weight: bold;
    color: #333;
    min-height: 24px;
    max-width: 400px;
    opacity: 0;
    transition: opacity 0.5s ease;
}

.heart {
    position: absolute;
    width: 20px;
    height: 20px;
    background-color: #ff4b5c;
    transform: rotate(-45deg);
    pointer-events: none;
}
.heart::before, .heart::after {
    content:"";
    position:absolute;
    width:20px; height:20px;
    background-color:#ff4b5c;
    border-radius:50%;
}
.heart::before { top:-10px; left:0; }
.heart::after { left:10px; top:0; }
</style>
</head>
<body>

<canvas id="fireworksCanvas"></canvas>

<div class="container">
    <h1>Will you be my Valentine?</h1>
    <div class="buttons">
        <button class="yes" id="yesBtn">Yes</button>
        <button class="no" id="noBtn">No</button>
    </div>
    <div id="message"></div>
</div>

<script>
const canvas = document.getElementById("fireworksCanvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});

const noBtn = document.getElementById("noBtn");
const yesBtn = document.getElementById("yesBtn");
const message = document.getElementById("message");

const loveQuotes = [
    "ðŸ’– Love is the greatest adventure of all.",
    "ðŸŒ¹ You are my heart's delight.",
    "ðŸ’Œ Every moment with you is magic.",
    "â¤ï¸ Be mine forever.",
    "ðŸ’˜ Life is sweeter with you.",
    "ðŸ’ž Roses are red, violets are blue, my heart beats only for you.",
    "ðŸ’ You make my soul smile.",
    "ðŸ’“ True love never fades.",
    "ðŸ’• Happiness is holding your hand.",
    "ðŸ’Ÿ No distance can lessen my love for you."
];

// Sounds
const heartSound = new Audio("https://www.orangefreesounds.com/wp-content/uploads/2023/04/Firework-crackling-sound-effect.mp3");
const fireworkSound = new Audio("https://orangefreesounds.com/wp-content/uploads/2024/12/Firework-burst-sound-effect.mp3");
const fireworkLaunchSound = new Audio("https://www.orangefreesounds.com/wp-content/uploads/2021/12/Firework-audio.mp3");

// --- No button movement ---
function moveButton() {
    noBtn.style.position = "fixed";
    const maxX = window.innerWidth - noBtn.offsetWidth;
    const maxY = window.innerHeight - noBtn.offsetHeight;
    noBtn.style.left = Math.random()*maxX + "px";
    noBtn.style.top = Math.random()*maxY + "px";
    const quote = loveQuotes[Math.floor(Math.random()*loveQuotes.length)];
    message.style.opacity=0;
    message.textContent=quote;
    setTimeout(()=>message.style.opacity=1,50);
}
noBtn.addEventListener("mouseover", moveButton);

// --- Hearts floating from button ---
function createHearts(centerX, centerY) {
    for(let i=0;i<15;i++){
        const heart=document.createElement('div');
        heart.className='heart';
        document.body.appendChild(heart);
        heart.style.left=centerX+'px';
        heart.style.top=centerY+'px';
        const angle=i*20*Math.PI/180;
        const radius=20+i*8;
        const duration=2000+Math.random()*800;
        const rotateDeg=360+Math.random()*360;
        heart.animate([
            { transform:`translate(0,0) rotate(0deg)`, opacity:1 },
            { transform:`translate(${Math.cos(angle)*radius}px, ${-200-radius}px) rotate(${rotateDeg}deg)`, opacity:0 }
        ], { duration:duration, easing:'ease-out' });
        setTimeout(()=>heart.remove(), duration);
        heartSound.currentTime=0; heartSound.play().catch(()=>{});
    }
}

// --- Canvas Fireworks ---
class Particle {
    constructor(x, y, vx, vy, color, life, radius=6) {
        this.x = x;
        this.y = y;
        this.vx = vx;
        this.vy = vy;
        this.color = color;
        this.life = life;
        this.opacity = 1;
        this.radius = radius;
    }
    update() {
        this.vy += 0.02; 
        this.x += this.vx;
        this.y += this.vy;
        this.opacity -= 0.003; 
        this.life--;
    }
    draw() {
        ctx.globalAlpha = Math.max(this.opacity,0);
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2);
        ctx.fill();
    }
}

let particles = [];
let rockets = [];

// Rocket class: heart-shaped, bigger, faster
class Rocket {
    constructor(x, targetY, color) {
        this.x = x;
        this.y = canvas.height;
        this.targetY = targetY;
        this.color = color;
        this.done = false;
        this.size = 40; // bigger rocket heart
    }

    update() {
        this.y -= 8; // faster upward
        if(this.y <= this.targetY) {
            this.explode();
            this.done = true;
        }
    }

    draw() {
        ctx.fillStyle = this.color;
        ctx.beginPath();
        const topCurveHeight = this.size * 0.3;
        ctx.moveTo(this.x, this.y + topCurveHeight);
        ctx.bezierCurveTo(this.x, this.y, this.x - this.size/2, this.y, this.x - this.size/2, this.y + topCurveHeight);
        ctx.bezierCurveTo(this.x - this.size/2, this.y + (this.size + topCurveHeight)/2, this.x, this.y + (this.size + topCurveHeight)/2, this.x, this.y + this.size);
        ctx.bezierCurveTo(this.x, this.y + (this.size + topCurveHeight)/2, this.x + this.size/2, this.y + (this.size + topCurveHeight)/2, this.x + this.size/2, this.y + topCurveHeight);
        ctx.bezierCurveTo(this.x + this.size/2, this.y, this.x, this.y, this.x, this.y + topCurveHeight);
        ctx.closePath();
        ctx.fill();
    }

    explode() {
        const num = 40; // fewer particles for smoother
        const scale = 18;
        for(let i=0;i<num;i++){
            const t = Math.random()*Math.PI*2;
            const hx = 16*Math.pow(Math.sin(t),3) * scale;
            const hy = -(13*Math.cos(t) - 5*Math.cos(2*t) - 2*Math.cos(3*t) - Math.cos(4*t)) * scale;
            const vx = hx*0.05 + (Math.random()-0.5)*1.0;
            const vy = hy*0.05 + (Math.random()-0.5)*1.0;
            particles.push(new Particle(this.x, this.y, vx, vy, this.color, 400, 6 + Math.random()*2));
        }
        fireworkSound.currentTime=0; fireworkSound.play().catch(()=>{});
    }
}

// Animate rockets and particles
function animate() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    for(let i=rockets.length-1;i>=0;i--){
        rockets[i].update();
        rockets[i].draw();
        if(rockets[i].done) rockets.splice(i,1);
    }

    for(let i=particles.length-1;i>=0;i--){
        const p = particles[i];
        p.update();
        p.draw();
        if(p.life <=0 || p.opacity<=0) particles.splice(i,1);
    }

    requestAnimationFrame(animate);
}
animate();

// Launch a rocket from bottom
function launchHeartFirework() {
    const x = Math.random()*canvas.width;
    const targetY = canvas.height * (0.2 + Math.random()*0.4);
    const color = ['#ff4b5c','#ffdd57','#ff6f61','#ff85a2','#ff9a9e'][Math.floor(Math.random()*5)];
    rockets.push(new Rocket(x, targetY, color));
    fireworkLaunchSound.currentTime=0; fireworkLaunchSound.play().catch(()=>{});
}

// --- Yes button: 10 rockets at same time, continuous 8s ---
yesBtn.addEventListener('click', ()=>{
    const rect = yesBtn.getBoundingClientRect();
    const centerX = rect.left + rect.width/2;
    const centerY = rect.top + rect.height/2;

    createHearts(centerX, centerY); // immediate heart pops

    // Launch 10 rockets staggered slightly for smoothness
    for(let i=0;i<10;i++){
        setTimeout(()=>launchHeartFirework(), i*30); 
    }

    let elapsed = 0;
    const duration = 8000; // 8 seconds
    const intervalTime = 1000;
    const interval = setInterval(()=>{
        for(let i=0;i<10;i++){
            setTimeout(()=>launchHeartFirework(), i*30);
        }
        elapsed += intervalTime;
        if(elapsed >= duration) clearInterval(interval);
    }, intervalTime);
});
</script>
</body>
</html>
